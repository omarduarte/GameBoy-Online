<html>
<head>
  <title>uGame</title>
  <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
  <link rel="stylesheet" href="css/game-view.css" />
</head>
<body>
  

  <iframe class="gameboy-color-emulator" src="gameboy-color-emulator.html" sandbox="allow-same-origin allow-scripts"></iframe>

  <script>
  $(function() {
    $('.gameboy-color-emulator').css('width', window.innerHeight * 160 / 144 + 'px');

    $( window ).resize(function() {
      $('.gameboy-color-emulator').css('width', window.innerHeight * 160 / 144 + 'px');
    });

    // THIS MIGHT BREAK SOMETHING ELSE
    // This re-selects the frame when a click event happens outside of the frame.
    $( window ).on('click', function() {
      window.frames[0].focus();
    });

    // ACCESS TO EMULATOR DONE HERE
    // -----------------------------------------------------------------
    // The GameBoy Color Frame can only be accessed if the served by
    // a server, if not, you will run into a Same-Origin policy violation.
    // 
    window.frames[0].onload = function() {
      window.gameBoyAPI = window.frames[0].gameBoyAPI;
      window.frames[0].focus();
    };

  });
  </script>
</body>
</html>